project Embedded
is
   type Target_Type is ("arm", "riscv32");
   Target_Arch : Target_Type := external ("TARGET");

   for Source_Dirs use ("../build/generated", "../examples");
   for Object_Dir use "../build/" & Target_Arch;
   for Create_Missing_Dirs use "True";
   for Target use Target_Arch & "-elf";
   case Target_Arch is
      when "arm" =>
         for Runtime ("Ada") use "zfp-stm32f4";
      when "riscv32" =>
         for Runtime ("Ada") use "zfp-rv32imac";
      when others =>
         null;
   end case;
   for Main use ("main.adb");

   package Builder is
      for Global_Compilation_Switches ("Ada") use (
         "-ffunction-sections",
         "-fdata-sections",
         "-Os",
         "-gnatp",
         "-fno-inline"
      );
   end Builder;

   package Linker is
      for Default_Switches ("Ada") use (
         "-Os",
         "-Wl,-gc-sections"
      );
   end Linker;

   package Ide is
      null;
   end Ide;

end Embedded;
